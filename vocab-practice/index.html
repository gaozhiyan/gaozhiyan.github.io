<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>思政英语词汇学习</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2563eb">
</head>
<body>
    <div class="app">
        <!-- 导航栏 -->
        <nav class="navbar">
            <h1 class="app-title">思政英语词汇</h1>
            <div class="nav-stats">
                <span id="progress-text">0/300</span>
            </div>
        </nav>

        <!-- 主要内容区域 -->
        <main class="main-content">
            <!-- 首页 -->
            <section id="home-section" class="section active">
                <div class="welcome-card">
                    <h2>开始学习</h2>
                    <p>300个思政英语词汇等你掌握</p>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-number" id="learned-count">0</span>
                            <span class="stat-label">已学习</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="mastered-count">0</span>
                            <span class="stat-label">已掌握</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="remaining-count">300</span>
                            <span class="stat-label">待学习</span>
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="showSection('study')">
                        📚 开始学习
                    </button>
                    <button class="btn btn-secondary" onclick="showSection('browse')">
                        📖 浏览词汇
                    </button>
                    <button class="btn btn-secondary" onclick="showSection('test')">
                        📝 测试练习
                    </button>
                    <button class="btn btn-outline" onclick="showSection('sync')">
                        ☁️ 云同步设置
                    </button>
                </div>
            </section>

            <!-- 云同步设置 -->
            <section id="sync-section" class="section">
                <div class="section-header">
                    <button class="btn-back" onclick="showSection('home')">← 返回</button>
                    <h2>云同步设置</h2>
                </div>

                <div class="sync-settings">
                    <div class="setting-card">
                        <h3>GitHub Gist 同步</h3>
                        <p class="setting-description">
                            使用GitHub Gist来同步您的学习进度，实现跨设备数据同步。
                        </p>
                        
                        <div class="setting-group">
                            <label for="gist-token">GitHub访问令牌：</label>
                            <input type="password" id="gist-token" placeholder="请输入GitHub Personal Access Token" />
                            <small class="help-text">
                                需要创建一个具有gist权限的Personal Access Token
                            </small>
                        </div>
                        
                        <div class="setting-group">
                            <label for="gist-id">Gist ID：</label>
                            <input type="text" id="gist-id" placeholder="请输入Gist ID（可选，留空将自动创建）" />
                            <small class="help-text">
                                如果已有Gist，请输入ID；否则将自动创建新的Gist
                            </small>
                        </div>
                        
                        <div class="setting-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="auto-sync" />
                                <span class="checkmark"></span>
                                启用自动同步
                            </label>
                            <small class="help-text">
                                在学习过程中自动同步进度数据
                            </small>
                        </div>
                        
                        <div class="sync-actions">
                            <button class="btn btn-primary" onclick="saveSyncSettings()">
                                保存设置
                            </button>
                            <button class="btn btn-secondary" onclick="testSync()">
                                测试连接
                            </button>
                            <button class="btn btn-outline" onclick="manualSync()">
                                手动同步
                            </button>
                        </div>
                        
                        <div class="sync-status" id="sync-status">
                            <p>同步状态：<span id="sync-status-text">未配置</span></p>
                            <p>最后同步：<span id="last-sync-time">从未同步</span></p>
                        </div>
                    </div>
                    
                    <div class="setting-card">
                        <h3>使用说明</h3>
                        <ol class="instructions">
                            <li>访问 <a href="https://github.com/settings/tokens" target="_blank">GitHub Settings > Personal access tokens</a></li>
                            <li>点击"Generate new token"创建新令牌</li>
                            <li>勾选"gist"权限</li>
                            <li>复制生成的令牌并粘贴到上方输入框</li>
                            <li>保存设置并测试连接</li>
                        </ol>
                    </div>
                </div>
            </section>

            <!-- 学习模式 -->
            <section id="study-section" class="section">
                <div class="section-header">
                    <button class="btn-back" onclick="showSection('home')">← 返回</button>
                    <h2>学习模式</h2>
                    <div class="study-progress">
                        <span id="current-index">1</span> / <span id="total-words">300</span>
                    </div>
                </div>

                <!-- 学习设置 -->
                <div class="study-settings">
                    <div class="setting-group">
                        <label>学习分类：</label>
                        <select id="categorySelect" class="category-select" onchange="setStudyCategory(this.value)">
                            <option value="all">全部分类</option>
                        </select>
                    </div>
                    
                    <div class="setting-group">
                        <label>学习顺序：</label>
                        <div class="option-buttons">
                            <button class="option-btn active" data-order="sequential" onclick="setStudyOrder('sequential')">顺序学习</button>
                            <button class="option-btn" data-order="random" onclick="setStudyOrder('random')">随机学习</button>
                        </div>
                    </div>
                </div>

                <div class="study-container">
                    <div class="flashcard" id="flashcard">
                    <div class="flashcard-inner">
                        <div class="flashcard-front">
                            <div class="category-label" id="category-label-front">综合概念</div>
                            <div class="word-chinese" id="word-chinese">点击开始学习</div>
                            <div class="card-hint">点击翻转查看英文</div>
                        </div>
                        <div class="flashcard-back">
                            <div class="category-label" id="category-label-back">综合概念</div>
                            <div class="word-english" id="word-english">Click to start learning</div>
                            <div class="card-hint">点击翻转查看中文</div>
                        </div>
                    </div>
                </div>

                    <div class="study-controls">
                        <button class="btn btn-outline" onclick="previousWord()">上一个</button>
                        <button class="btn btn-success" onclick="markAsKnown()">认识</button>
                        <button class="btn btn-warning" onclick="markAsUnknown()">不认识</button>
                        <button class="btn btn-outline" onclick="nextWord()">下一个</button>
                    </div>
                </div>
            </section>

            <!-- 浏览模式 -->
            <section id="browse-section" class="section">
                <div class="section-header">
                    <button class="btn-back" onclick="showSection('home')">← 返回</button>
                    <h2>词汇浏览</h2>
                </div>

                <div class="search-container">
                    <input type="text" id="search-input" placeholder="搜索词汇..." class="search-input">
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-filter="all">全部</button>
                        <button class="filter-btn" data-filter="unknown">未学习</button>
                        <button class="filter-btn" data-filter="learning">学习中</button>
                        <button class="filter-btn" data-filter="known">已掌握</button>
                    </div>
                </div>

                <div class="word-list" id="word-list">
                    <!-- 词汇列表将通过JavaScript动态生成 -->
                </div>
            </section>

            <!-- 测试模式 -->
            <section id="test-section" class="section">
                <div class="section-header">
                    <button class="btn-back" onclick="handleTestBack()">← 返回</button>
                    <h2>测试练习</h2>
                    <div class="test-progress">
                        <span id="test-current">1</span> / <span id="test-total">10</span>
                    </div>
                </div>

                <!-- 测试设置 -->
                <div class="test-settings" id="test-settings">
                    <div class="setting-group">
                        <h3>题目数量</h3>
                        <div class="option-buttons">
                            <button class="option-btn active" data-count="10">10题</button>
                            <button class="option-btn" data-count="20">20题</button>
                            <button class="option-btn" data-count="50">50题</button>
                        </div>
                    </div>

                    <div class="setting-group">
                        <h3>题型选择</h3>
                        <div class="option-buttons">
                            <button class="option-btn active" data-type="choice">选择题</button>
                            <button class="option-btn" data-type="cn-to-en">中翻英</button>
                            <button class="option-btn" data-type="en-to-cn">英翻中</button>
                        </div>
                    </div>

                    <div class="test-controls">
                        <button class="btn btn-primary" onclick="startTest()">开始测试</button>
                    </div>
                </div>

                <div class="test-container" id="test-container" style="display:none;">
                    <div class="test-question" id="test-question">
                        <h3 id="question-text">准备开始测试</h3>
                        <div class="test-options" id="test-options">
                            <!-- 选项将通过JavaScript动态生成 -->
                        </div>
                        <div class="choice-controls">
                            <button class="btn btn-secondary" onclick="nextQuestion()" style="display:none;" id="next-btn">下一题</button>
                        </div>
                        <div class="translation-container" id="translation-container" style="display:none;">
                            <!-- 答题区域 -->
                            <div class="answer-area">
                                <div class="question-text" id="question-text"></div>
                                <div class="input-container">
                                    <textarea id="translation-input" class="translation-input" placeholder="请输入答案" rows="3"></textarea>
                                </div>
                                
                                <!-- 正确答案显示区域 - 移动到输入框下方 -->
                                <div class="correct-answer-display" id="correct-answer-section" style="display:none;">
                                    <div class="correct-label">正确答案：</div>
                                    <div class="correct-answer" id="correct-answer"></div>
                                </div>
                                
                                <div class="button-container">
                                    <button class="submit-button" id="submit-translation-btn" onclick="submitTranslation()">
                                        提交答案
                                    </button>
                                    <button class="btn btn-secondary" onclick="nextQuestion()" style="display:none;" id="next-btn">下一题</button>
                                </div>
                                
                                <!-- 反馈区域 -->
                                <div class="feedback-area" id="translation-feedback" style="display:none;">
                                    <div class="feedback-message">
                                        <p class="feedback-text" id="feedback-text"></p>
                                    </div>
                                </div>
                            </div>
                            </div>
                        </div>
                    </div>

                    <div class="test-result" id="test-result" style="display:none;">
                        <h3>测试完成！</h3>
                        <div class="result-stats">
                            <p>正确率: <span id="accuracy">0%</span></p>
                            <p>正确题数: <span id="correct-count">0</span> / <span id="question-count">10</span></p>
                        </div>
                        <button class="btn btn-primary" onclick="restartTest()">重新测试</button>
                    </div>
                </div>
            </section>
        </main>

        <!-- 底部导航 -->
        <nav class="bottom-nav">
            <button class="nav-item active" onclick="showSection('home')">
                <span class="nav-icon">🏠</span>
                <span class="nav-label">首页</span>
            </button>
            <button class="nav-item" onclick="showSection('study')">
                <span class="nav-icon">📚</span>
                <span class="nav-label">学习</span>
            </button>
            <button class="nav-item" onclick="showSection('browse')">
                <span class="nav-icon">📖</span>
                <span class="nav-label">浏览</span>
            </button>
            <button class="nav-item" onclick="showSection('test')">
                <span class="nav-icon">📝</span>
                <span class="nav-label">测试</span>
            </button>
        </nav>

        <!-- 版权声明 -->
        <footer class="copyright">
            <p>&copy; 江苏航运学院公共英语教研室</p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>